/*
Tên file: 03_model_parameters_data.sql
Mô tả: Nhập dữ liệu mẫu cho bảng MODEL_PARAMETERS
Tác giả: Nguyễn Ngọc Bình
Ngày tạo: 2025-05-10
Phiên bản: 1.0
*/

-- Xóa dữ liệu cũ nếu cần
-- DELETE FROM MODEL_REGISTRY.dbo.MODEL_PARAMETERS;

-- Lấy MODEL_ID của các mô hình để tham chiếu
DECLARE @PD_RETAIL_ID INT;
DECLARE @PD_MORTGAGE_ID INT;
DECLARE @PD_SME_ID INT;
DECLARE @BSCORE_RETAIL_ID INT;
DECLARE @ASCORE_RETAIL_ID INT;
DECLARE @ASCORE_RETAIL_BUREAU_ID INT;

SELECT @PD_RETAIL_ID = MODEL_ID FROM MODEL_REGISTRY.dbo.MODEL_REGISTRY WHERE MODEL_NAME = 'PD_RETAIL';
SELECT @PD_MORTGAGE_ID = MODEL_ID FROM MODEL_REGISTRY.dbo.MODEL_REGISTRY WHERE MODEL_NAME = 'PD_RETAIL_MORTGAGE';
SELECT @PD_SME_ID = MODEL_ID FROM MODEL_REGISTRY.dbo.MODEL_REGISTRY WHERE MODEL_NAME = 'PD_SME';
SELECT @BSCORE_RETAIL_ID = MODEL_ID FROM MODEL_REGISTRY.dbo.MODEL_REGISTRY WHERE MODEL_NAME = 'BSCORE_RETAIL_MORTGAGE';
SELECT @ASCORE_RETAIL_ID = MODEL_ID FROM MODEL_REGISTRY.dbo.MODEL_REGISTRY WHERE MODEL_NAME = 'ASCORE_RETAIL';
SELECT @ASCORE_RETAIL_BUREAU_ID = MODEL_ID FROM MODEL_REGISTRY.dbo.MODEL_REGISTRY WHERE MODEL_NAME = 'ASCORE_RETAIL_BUREAU';

-- Nhập dữ liệu vào bảng MODEL_PARAMETERS
INSERT INTO MODEL_REGISTRY.dbo.MODEL_PARAMETERS (
    MODEL_ID,
    PARAMETER_NAME,
    PARAMETER_DESCRIPTION,
    PARAMETER_VALUE,
    PARAMETER_TYPE,
    PARAMETER_FORMAT,
    MIN_VALUE,
    MAX_VALUE,
    IS_CALIBRATED,
    LAST_CALIBRATION_DATE,
    EFF_DATE,
    EXP_DATE,
    IS_ACTIVE
)
VALUES 
-- PD Retail Parameters
(@PD_RETAIL_ID, 'INTERCEPT', N'Hệ số chặn', '-1.8234', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-01', '2024-01-01', '2026-01-01', 1),
(@PD_RETAIL_ID, 'UTIL_RATIO_COEF', N'Hệ số tỷ lệ sử dụng hạn mức', '0.7621', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-01', '2024-01-01', '2026-01-01', 1),
(@PD_RETAIL_ID, 'INCOME_COEF', N'Hệ số thu nhập', '-0.5218', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-01', '2024-01-01', '2026-01-01', 1),
(@PD_RETAIL_ID, 'AGE_COEF', N'Hệ số tuổi tài khoản', '-0.0124', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-01', '2024-01-01', '2026-01-01', 1),
(@PD_RETAIL_ID, 'DPD_30_COEF', N'Hệ số số lần trễ hạn 30+ trong 12 tháng qua', '0.9821', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-01', '2024-01-01', '2026-01-01', 1),
(@PD_RETAIL_ID, 'PD_SCALE', N'Hệ số chuyển đổi thành xác suất', '1.0', 'SCALING', 'NUMERIC', '0.01', '1.0', 1, '2024-01-01', '2024-01-01', '2026-01-01', 1),
(@PD_RETAIL_ID, 'PD_CALIBRATION', N'Hệ số hiệu chỉnh xác suất', '1.05', 'CALIBRATION', 'NUMERIC', '0.5', '1.5', 1, '2024-01-01', '2024-01-01', '2026-01-01', 1),
(@PD_RETAIL_ID, 'PDO', N'Điểm đặc trưng nhân đôi tỷ số cơ hội', '20', 'SCALING', 'NUMERIC', '10', '50', 0, NULL, '2024-01-01', '2026-01-01', 1),
(@PD_RETAIL_ID, 'SCORE_OFFSET', N'Điểm cố định', '500', 'SCALING', 'NUMERIC', '0', '1000', 0, NULL, '2024-01-01', '2026-01-01', 1),

-- PD Mortgage Parameters 
(@PD_MORTGAGE_ID, 'INTERCEPT', N'Hệ số chặn', '-2.1245', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-03-01', '2024-03-01', '2026-03-01', 1),
(@PD_MORTGAGE_ID, 'LTV_COEF', N'Hệ số tỷ lệ khoản vay trên giá trị tài sản', '0.9318', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-03-01', '2024-03-01', '2026-03-01', 1),
(@PD_MORTGAGE_ID, 'INCOME_COEF', N'Hệ số thu nhập', '-0.4129', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-03-01', '2024-03-01', '2026-03-01', 1),
(@PD_MORTGAGE_ID, 'AGE_COEF', N'Hệ số tuổi tài khoản', '-0.0098', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-03-01', '2024-03-01', '2026-03-01', 1),
(@PD_MORTGAGE_ID, 'PD_SCALE', N'Hệ số chuyển đổi thành xác suất', '1.0', 'SCALING', 'NUMERIC', '0.01', '1.0', 1, '2024-03-01', '2024-03-01', '2026-03-01', 1),
(@PD_MORTGAGE_ID, 'PD_CALIBRATION', N'Hệ số hiệu chỉnh xác suất', '1.03', 'CALIBRATION', 'NUMERIC', '0.5', '1.5', 1, '2024-03-01', '2024-03-01', '2026-03-01', 1),

-- PD SME Parameters
(@PD_SME_ID, 'INTERCEPT', N'Hệ số chặn', '-1.5624', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-04-01', '2024-04-01', '2026-04-01', 1),
(@PD_SME_ID, 'LEVERAGE_COEF', N'Hệ số đòn bẩy tài chính', '0.8541', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-04-01', '2024-04-01', '2026-04-01', 1),
(@PD_SME_ID, 'PROFITABILITY_COEF', N'Hệ số khả năng sinh lời', '-0.7231', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-04-01', '2024-04-01', '2026-04-01', 1),
(@PD_SME_ID, 'LIQUIDITY_COEF', N'Hệ số thanh khoản', '-0.6129', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-04-01', '2024-04-01', '2026-04-01', 1),
(@PD_SME_ID, 'AGE_BUS_COEF', N'Hệ số tuổi doanh nghiệp', '-0.2137', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-04-01', '2024-04-01', '2026-04-01', 1),
(@PD_SME_ID, 'INDUSTRY_RISK', N'Hệ số rủi ro ngành', '{"MANUFACTURING": 0.1, "RETAIL": 0.2, "CONSTRUCTION": 0.4, "HOSPITALITY": 0.5, "TECHNOLOGY": 0.1}', 'LOOKUP', 'JSON', NULL, NULL, 1, '2024-04-01', '2024-04-01', '2026-04-01', 1),
(@PD_SME_ID, 'PD_CALIBRATION', N'Hệ số hiệu chỉnh xác suất', '1.12', 'CALIBRATION', 'NUMERIC', '0.5', '1.5', 1, '2024-04-01', '2024-04-01', '2026-04-01', 1),

-- Behavioral Scorecard Parameters
(@BSCORE_RETAIL_ID, 'INTERCEPT', N'Hệ số chặn', '500', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-01', '2024-02-01', '2026-02-01', 1),
(@BSCORE_RETAIL_ID, 'UTIL_RATIO_WEIGHT', N'Trọng số tỷ lệ sử dụng hạn mức', '-50', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-01', '2024-02-01', '2026-02-01', 1),
(@BSCORE_RETAIL_ID, 'PAYMENT_HISTORY_WEIGHT', N'Trọng số lịch sử thanh toán', '80', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-01', '2024-02-01', '2026-02-01', 1),
(@BSCORE_RETAIL_ID, 'CASH_ADVANCE_WEIGHT', N'Trọng số rút tiền mặt', '-30', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-01', '2024-02-01', '2026-02-01', 1),
(@BSCORE_RETAIL_ID, 'OUTSTANDING_GROWTH_WEIGHT', N'Trọng số tăng trưởng dư nợ', '-45', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-01', '2024-02-01', '2026-02-01', 1),
(@BSCORE_RETAIL_ID, 'SCORE_CUTOFF', N'Điểm ngưỡng phân loại', '{"Low Risk": 700, "Medium Risk": 600, "High Risk": 500, "Very High Risk": 400}', 'THRESHOLD', 'JSON', NULL, NULL, 0, NULL, '2024-02-01', '2026-02-01', 1),
(@BSCORE_RETAIL_ID, 'PD_MAPPING', N'Ánh xạ điểm sang xác suất vỡ nợ', '{"800": 0.001, "700": 0.005, "600": 0.02, "500": 0.05, "400": 0.15, "300": 0.30}', 'LOOKUP', 'JSON', NULL, NULL, 1, '2024-02-01', '2024-02-01', '2026-02-01', 1),

-- Application Scorecard Parameters
(@ASCORE_RETAIL_ID, 'INTERCEPT', N'Hệ số chặn', '450', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-15', '2024-01-15', '2026-01-15', 1),
(@ASCORE_RETAIL_ID, 'INCOME_WEIGHT', N'Trọng số thu nhập', '60', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-15', '2024-01-15', '2026-01-15', 1),
(@ASCORE_RETAIL_ID, 'AGE_WEIGHT', N'Trọng số tuổi', '25', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-15', '2024-01-15', '2026-01-15', 1),
(@ASCORE_RETAIL_ID, 'RESIDENCE_STABILITY_WEIGHT', N'Trọng số ổn định nơi cư trú', '20', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-15', '2024-01-15', '2026-01-15', 1),
(@ASCORE_RETAIL_ID, 'EMPLOYMENT_STABILITY_WEIGHT', N'Trọng số ổn định việc làm', '35', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-01-15', '2024-01-15', '2026-01-15', 1),
(@ASCORE_RETAIL_ID, 'SCORE_CUTOFF', N'Điểm ngưỡng phê duyệt', '{"Auto Approve": 750, "Manual Review": 600, "Auto Reject": 500}', 'THRESHOLD', 'JSON', NULL, NULL, 0, NULL, '2024-01-15', '2026-01-15', 1),

-- Application Scorecard with Bureau Parameters
(@ASCORE_RETAIL_BUREAU_ID, 'INTERCEPT', N'Hệ số chặn', '400', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-20', '2024-02-20', '2026-02-20', 1),
(@ASCORE_RETAIL_BUREAU_ID, 'INCOME_WEIGHT', N'Trọng số thu nhập', '50', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-20', '2024-02-20', '2026-02-20', 1),
(@ASCORE_RETAIL_BUREAU_ID, 'AGE_WEIGHT', N'Trọng số tuổi', '15', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-20', '2024-02-20', '2026-02-20', 1),
(@ASCORE_RETAIL_BUREAU_ID, 'RESIDENCE_STABILITY_WEIGHT', N'Trọng số ổn định nơi cư trú', '15', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-20', '2024-02-20', '2026-02-20', 1),
(@ASCORE_RETAIL_BUREAU_ID, 'EMPLOYMENT_STABILITY_WEIGHT', N'Trọng số ổn định việc làm', '20', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-20', '2024-02-20', '2026-02-20', 1),
(@ASCORE_RETAIL_BUREAU_ID, 'CREDIT_HISTORY_WEIGHT', N'Trọng số lịch sử tín dụng', '90', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-20', '2024-02-20', '2026-02-20', 1),
(@ASCORE_RETAIL_BUREAU_ID, 'BUREAU_INQUIRIES_WEIGHT', N'Trọng số số lần truy vấn thông tin tín dụng', '-30', 'COEFFICIENT', 'NUMERIC', NULL, NULL, 1, '2024-02-20', '2024-02-20', '2026-02-20', 1),
(@ASCORE_RETAIL_BUREAU_ID, 'SCORE_CUTOFF', N'Điểm ngưỡng phê duyệt', '{"Auto Approve": 700, "Manual Review": 550, "Auto Reject": 450}', 'THRESHOLD', 'JSON', NULL, NULL, 0, NULL, '2024-02-20', '2026-02-20', 1)
GO

PRINT N'Đã nhập dữ liệu mẫu cho bảng MODEL_PARAMETERS thành công.';
GO